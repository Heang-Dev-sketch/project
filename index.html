<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Converting-kh - បម្លែងវីដេអូ MP3 & MP4</title>
    <!-- ភ្ជាប់ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ប្រើ Font 'Kantumruy Pro' ពី Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    <style>
        /* អនុវត្ត Font ទៅលើទំព័រទាំងមូល */
        body {
            font-family: 'Kantumruy Pro', sans-serif;
            scroll-behavior: smooth; /* ធ្វើឲ្យ scroll ពេលចុច link មានភាពរលូន */
        }
        /* បង្កើត Animation សម្រាប់ Spinner */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .spinner {
            animation: spin 1s linear infinite;
        }
        /* លាក់ input file ដើម */
        #file-upload {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- 1. ផ្នែក Menu Bar (Navigation) -->
    <nav class="bg-white shadow-md fixed w-full z-10 top-0">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- ផ្នែកខាងឆ្វេង (Logo/Brand) -->
                <div class="flex-shrink-0 flex items-center">
                    <a href="#converter" class="text-2xl font-bold text-blue-600">
                        Converting-kh
                    </a>
                </div>

                <!-- ផ្នែកខាងស្តាំ (Menu សម្រាប់ Desktop) -->
                <div class="hidden md:flex md:items-center md:space-x-8">
                    <a href="#converter" class="text-gray-900 font-semibold hover:text-blue-600 transition-colors">បម្លែងវីដេអូ</a>
                    <a href="#features" class="text-gray-500 hover:text-blue-600 transition-colors">លក្ខណៈពិសេស</a>
                    <a href="#about" class="text-gray-500 hover:text-blue-600 transition-colors">អំពីយើង</a>
                    <!-- ប៊ូតុង Call to Action -->
                    <a href="#converter" class="inline-block bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                        ចាប់ផ្តើម
                    </a>
                </div>

                <!-- ប៊ូតុងសម្រាប់ Mobile Menu (Hamburger) -->
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900">
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path id="menu-open-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                            <path id="menu-close-icon" class="hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu (បង្ហាញពេលចុចប៊ូតុង) -->
        <div id="mobile-menu" class="md:hidden hidden bg-white shadow-lg absolute w-full">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#converter" class="block px-3 py-2 rounded-md text-base font-semibold text-gray-900 bg-gray-100">បម្លែងវីដេអូ</a>
                <a href="#features" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">លក្ខណៈពិសេស</a>
                <a href="#about" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">អំពីយើង</a>
            </div>
            <!-- ប៊ូតុង Call to Action ក្នុង Mobile -->
            <div class="px-4 pb-4">
                <a href="#converter" class="block w-full text-center bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                    ចាប់ផ្តើម
                </a>
            </div>
        </div>
    </nav>

    <!-- 2. ផ្នែក Converter (ឧបករណ៍បម្លែង) -->
    <!-- ប្រើ pt-24 (padding-top) ដើម្បីកុំឲ្យមាតិកានៅក្រោម Menu Bar -->
    <main id="converter" class="pt-24 pb-16 bg-white">
        <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <!-- 1. ផ្នែកចំណងជើង -->
            <div class="text-center mb-8">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-900">
                    បម្លែងវីដេអូទៅជា <span class="text-blue-600">MP3</span> ឬ <span class="text-green-600">MP4</span>
                </h1>
                <p class="text-gray-600 text-lg mt-3">
                    សេវាកម្មងាយស្រួល លឿនរហ័ស និងឥតគិតថ្លៃ។
                </p>
            </div>

            <!-- 2. ផ្នែក Upload -->
            <div class="bg-white rounded-lg shadow-xl p-6 md:p-8">
                <div class="mb-6">
                    <!-- ប្រអប់សម្រាប់ Drag and Drop ឬ ចុចដើម្បី Upload -->
                    <label for="file-upload" class="cursor-pointer">
                        <div id="upload-box" class="border-2 border-dashed border-gray-300 rounded-lg p-10 text-center hover:border-blue-500 transition-colors">
                            <!-- Icon សម្រាប់ Upload -->
                            <svg class="mx-auto h-12 w-12 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l-3 3m3-3l3-3m0 6.75a7.5 7.5 0 11-15 0 7.5 7.5 0 0115 0z" />
                            </svg>
                            <p class="mt-2 text-gray-700 font-semibold">ចុចដើម្បីជ្រើសរើស ឬ ទម្លាក់ឯកសារមកទីនេះ</p>
                            <p class="text-sm text-gray-500">គាំទ្រប្រភេទវីដេអូ: MP4, AVI, MKV, MOV...</p>
                            <!-- បង្ហាញឈ្មោះឯកសារដែលបានជ្រើសរើស -->
                            <p id="file-name" class="text-blue-600 font-medium mt-2"></p>
                        </div>
                    </label>
                    <!-- Input file ដែលលាក់ទុក -->
                    <input id="file-upload" type="file" accept="video/*" />
                </div>

                <!-- 3. ផ្នែកជ្រើសរើស Format -->
                <div class="mb-6">
                    <label class="block text-gray-700 font-semibold mb-3">ជ្រើសរើសប្រភេទឯកសារបម្លែង (Format)៖</label>
                    <div class="flex space-x-4">
                        <!-- ជម្រើស MP3 -->
                        <label for="format-mp3" class="flex-1">
                            <input type="radio" id="format-mp3" name="format" value="mp3" class="hidden peer" checked>
                            <div class="p-4 rounded-lg border border-gray-300 text-center cursor-pointer peer-checked:border-blue-600 peer-checked:bg-blue-50 peer-checked:text-blue-700 peer-checked:shadow-md">
                                <span class="text-xl font-bold">MP3</span>
                                <p class="text-sm"> (សម្រាប់តែសំឡេង) </p>
                            </div>
                        </label>
                        <!-- ជម្រើស MP4 -->
                        <label for="format-mp4" class="flex-1">
                            <input type="radio" id="format-mp4" name="format" value="mp4" class="hidden peer">
                            <div class="p-4 rounded-lg border border-gray-300 text-center cursor-pointer peer-checked:border-green-600 peer-checked:bg-green-50 peer-checked:text-green-700 peer-checked:shadow-md">
                                <span class="text-xl font-bold">MP4</span>
                                <p class="text-sm"> (វីដេអូ និង សំឡេង) </p>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- 4. ប៊ូតុងបម្លែង -->
                <div class="mb-6">
                    <button id="convert-btn" class="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-lg hover:bg-blue-700 transition-colors focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:bg-gray-400">
                        បម្លែងឥឡូវនេះ
                    </button>
                </div>

                <!-- 5. ផ្នែកបង្ហាញលទ្ធផល (លាក់ទុកជាមុន) -->
                <div id="result-section" class="hidden">
                    <!-- កំពុងដំណើរការ (Loading) -->
                    <div id="loading-state" class="text-center p-4 rounded-lg bg-gray-50 border border-gray-200">
                        <!-- Icon វិល -->
                        <svg class="spinner mx-auto h-8 w-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <p id="loading-text" class="mt-2 text-gray-700 font-medium">កំពុងបម្លែង... សូមរង់ចាំ</p>
                    </div>

                    <!-- ដំណើរការបានជោគជ័យ (Download) -->
                    <div id="download-state" class="hidden text-center p-6 rounded-lg bg-green-50 border border-green-200">
                        <svg class="mx-auto h-12 w-12 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h3 class="text-xl font-semibold text-green-800 mt-3">បម្លែងបានជោគជ័យ!</h3>
                        <p class="text-gray-600 mt-1">ឯកសាររបស់អ្នករួចរាល់សម្រាប់ទាញយក។</p>
                        <!-- កន្លែងនេះ ត្រូវដាក់ Link សម្រាប់ Download ពី Server -->
                        <a id="download-link" href="#" class="mt-4 inline-block bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 transition-colors">
                            ទាញយកឯកសារ
                        </a>
                    </div>
                    
                    <!-- ដំណើរការបរាជ័យ (Error) -->
                    <div id="error-state" class="hidden text-center p-6 rounded-lg bg-red-50 border border-red-200">
                         <svg class="mx-auto h-12 w-12 text-red-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
                        </svg>
                        <h3 class="text-xl font-semibold text-red-800 mt-3">មានបញ្ហា!</h3>
                        <p id="error-message" class="text-gray-600 mt-1">មិនអាចបម្លែងឯកសារបានទេ។ សូមព្យាយាមម្តងទៀត។</p>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- 3. ផ្នែកលក្ខណៈពិសេស (Features) -->
    <section id="features" class="bg-gray-100 py-16">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900">លក្ខណៈពិសេសចម្បង</h2>
                <p class="mt-2 text-gray-600">ហេតុអ្វីអ្នកគួរជ្រើសរើស Converting-kh?</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Feature 1: High Quality -->
                <div class="bg-white p-6 rounded-lg shadow-lg text-center">
                    <!-- Icon -->
                    <svg class="h-12 w-12 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <h3 class="text-xl font-semibold text-gray-900 mt-4">គុណភាពខ្ពស់</h3>
                    <p class="text-gray-600 mt-2">រក្សាគុណភាពសំឡេង និង រូបភាព ក្រោយពេលបម្លែង។</p>
                </div>

                <!-- Feature 2: Fast Conversion -->
                <div class="bg-white p-6 rounded-lg shadow-lg text-center">
                    <!-- Icon -->
                    <svg class="h-12 w-12 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5" />
                    </svg>
                    <h3 class="text-xl font-semibold text-gray-900 mt-4">ដំណើរការលឿន</h3>
                    <p class="text-gray-600 mt-2">ម៉ាស៊ីនបម្រើ (Server) របស់យើងបម្លែងឯកសារបានលឿនរហ័ស។</p>
                </div>

                <!-- Feature 3: Free & Secure -->
                <div class="bg-white p-6 rounded-lg shadow-lg text-center">
                    <!-- Icon -->
                    <svg class="h-12 w-12 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
                    </svg>
                    <h3 class="text-xl font-semibold text-gray-900 mt-4">សុវត្ថិភាព និង ឥតគិតថ្លៃ</h3>
                    <p class="text-gray-600 mt-2">ឯកសាររបស់អ្នកនឹងត្រូវលុបចោល បន្ទាប់ពី 1 ម៉ោង។</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. ផ្នែក Footer (បាតទំព័រ) -->
    <footer id="about" class="bg-gray-800 text-gray-300 py-8">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2024 Converting-kh. រក្សាសិទ្ធិគ្រប់យ៉ាង។</p>
            <div class="flex justify-center space-x-4 mt-4">
                <a href="#" class="hover:text-white">គោលការណ៍ឯកជនភាព</a>
                <a href="#" class="hover:text-white">លក្ខខណ្ឌប្រើប្រាស់</a>
            </div>
        </div>
    </footer>


    <script>
        // --- ផ្នែកទី 1: JavaScript សម្រាប់ Mobile Menu ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuOpenIcon = document.getElementById('menu-open-icon');
        const menuCloseIcon = document.getElementById('menu-close-icon');

        mobileMenuButton.addEventListener('click', () => {
            // បិទ/បើក Menu
            mobileMenu.classList.toggle('hidden');
            
            // ដូរ Icon (Hamburger / Close)
            menuOpenIcon.classList.toggle('hidden');
            menuCloseIcon.classList.toggle('hidden');
        });

        // បិទ Menu ពេលចុចលើ Link (សម្រាប់ទូរស័ព្ទ)
        mobileMenu.addEventListener('click', (e) => {
            if (e.target.tagName === 'A') {
                mobileMenu.classList.add('hidden');
                menuOpenIcon.classList.remove('hidden');
                menuCloseIcon.classList.add('hidden');
            }
        });

        // --- ផ្នែកទី 2: JavaScript សម្រាប់ឧបករណ៍បម្លែង ---
        const fileUploadInput = document.getElementById('file-upload');
        const fileNameDisplay = document.getElementById('file-name');
        const uploadBox = document.getElementById('upload-box');
        const convertBtn = document.getElementById('convert-btn');
        const resultSection = document.getElementById('result-section');
        const loadingState = document.getElementById('loading-state');
        const loadingText = document.getElementById('loading-text');
        const downloadState = document.getElementById('download-state');
        const errorState = document.getElementById('error-state');
        const errorMessage = document.getElementById('error-message');
        const downloadLink = document.getElementById('download-link');

        let selectedFile = null;

        // ពេលអ្នកប្រើប្រាស់ជ្រើសរើសឯកសារ
        fileUploadInput.addEventListener('change', (event) => {
            const files = event.target.files;
            if (files.length > 0) {
                selectedFile = files[0];
                fileNameDisplay.textContent = selectedFile.name;
                // បិទផ្ទាំងលទ្ធផល ប្រសិនបើកំពុងបង្ហាញ
                resultSection.classList.add('hidden');
                downloadState.classList.add('hidden');
                errorState.classList.add('hidden');
            }
        });

        // មុខងារសម្រាប់ Drag and Drop
        uploadBox.addEventListener('dragover', (event) => {
            event.preventDefault(); // ទប់ស្កាត់ Default behavior
            uploadBox.classList.add('border-blue-500', 'bg-blue-50');
        });

        uploadBox.addEventListener('dragleave', () => {
            uploadBox.classList.remove('border-blue-500', 'bg-blue-50');
        });

        uploadBox.addEventListener('drop', (event) => {
            event.preventDefault(); // ទប់ស្កាត់ Default behavior
            uploadBox.classList.remove('border-blue-500', 'bg-blue-50');
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                selectedFile = files[0];
                fileNameDisplay.textContent = selectedFile.name;
                fileUploadInput.files = files; // បញ្ចូលឯកសារទៅក្នុង input
                resultSection.classList.add('hidden');
            }
        });

        // ពេលចុចប៊ូតុង "បម្លែង"
        convertBtn.addEventListener('click', () => {
            if (!selectedFile) {
                // សូមប្តូរ alert ទៅជា modal ស្អាត ប្រសិនបើអ្នកចង់
                alert('សូមជ្រើសរើសឯកសារវីដេអូជាមុនសិន!');
                return;
            }

            // យកប្រភេទ Format ដែលបានជ្រើសរើស
            const selectedFormat = document.querySelector('input[name="format"]:checked').value;
            
            // បិទប៊ូតុង និងបង្ហាញផ្ទាំង Loading
            convertBtn.disabled = true;
            convertBtn.textContent = 'កំពុងដំណើរការ...';
            resultSection.classList.remove('hidden');
            loadingState.classList.remove('hidden');
            downloadState.classList.add('hidden');
            errorState.classList.add('hidden');
            loadingText.textContent = `កំពុងបម្លែង ${selectedFile.name} ទៅជា ${selectedFormat.toUpperCase()}...`;

            // --- ចំណុចសំខាន់ (ក្លែងធ្វើ) ---
            // ត្រង់នេះ ត្រូវ Upload (selectedFile) ទៅកាន់ Server។
            // ខាងក្រោមនេះ គ្រាន់តែជាការក្លែងធ្វើ (Simulation) តែប៉ុណ្ណោះ
            
            console.log('Fake Upload: កំពុងបញ្ជូន', selectedFile.name, 'ទៅកាន់ Server ដើម្បីបម្លែងជា', selectedFormat);

            setTimeout(() => {
                // ក្លែងធ្វើថាដំណើរការបានជោគជ័យ (90% ជោគជ័យ)
                const success = Math.random() > 0.1; 

                if (success) {
                    loadingState.classList.add('hidden');
                    downloadState.classList.remove('hidden');
                    // កំណត់ Link សម្រាប់ទាញយក (Link ក្លែងក្លាយ)
                    downloadLink.href = `/download/fake_converted_file.${selectedFormat}`;
                    downloadLink.download = `converted_${selectedFile.name}.${selectedFormat}`;
                    downloadLink.textContent = `ទាញយក ${selectedFormat.toUpperCase()}`;
                } else {
                    // ក្លែងធ្វើថាមានបញ្ហា
                    loadingState.classList.add('hidden');
                    errorState.classList.remove('hidden');
                    errorMessage.textContent = 'មានបញ្ហាក្នុងការបម្លែងឯកសារ។ Server មិនឆ្លើយតប។';
                }

                // បើកប៊ូតុងវិញ
                convertBtn.disabled = false;
                convertBtn.textContent = 'បម្លែងម្ដងទៀត';
                
                // លុបឯកសារដែលបានជ្រើសរើស (ដើម្បីឲ្យគេ Upload ថ្មី)
                selectedFile = null;
                fileNameDisplay.textContent = '';
                fileUploadInput.value = '';

            }, 4000); // ប្រើពេល 4 វិនាទី ដើម្បីក្លែងធ្វើ
        });
    </script>

</body>
</html>
